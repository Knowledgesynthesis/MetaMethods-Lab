import type { Question } from '@/types'

export const assessmentQuestions: Question[] = [
  {
    id: 'q1',
    module: 'effect-size-basics',
    question: 'Which effect measure is most appropriate for continuous outcomes measured on the same scale across studies?',
    options: [
      'Standardized Mean Difference (SMD)',
      'Mean Difference (MD)',
      'Odds Ratio (OR)',
      'Risk Ratio (RR)',
    ],
    correctAnswer: 1,
    rationale: 'Mean Difference (MD) is used when continuous outcomes are measured on the same scale (e.g., blood pressure in mmHg). It is directly interpretable in the original units. SMD is used when outcomes are measured on different scales.',
    difficulty: 'easy',
  },
  {
    id: 'q2',
    module: 'effect-size-basics',
    question: 'For common outcomes (>10% incidence), which statement is TRUE about Odds Ratio (OR) vs Risk Ratio (RR)?',
    options: [
      'OR and RR are always equal',
      'OR approximates RR well',
      'OR overestimates RR',
      'RR overestimates OR',
    ],
    correctAnswer: 2,
    rationale: 'When outcomes are common, OR overestimates RR and the two diverge. OR only approximates RR when outcomes are rare (<10%). Interpreting OR as RR for common outcomes is a common mistake.',
    difficulty: 'medium',
  },
  {
    id: 'q3',
    module: 'pairwise-meta-analysis',
    question: 'What does an I² value of 75% indicate?',
    options: [
      'Low heterogeneity - studies are consistent',
      'Moderate heterogeneity - some variation',
      'Substantial heterogeneity - considerable variation',
      '75% of studies show a significant effect',
    ],
    correctAnswer: 2,
    rationale: 'I² = 75% indicates substantial heterogeneity. By convention: I² < 25% is low, 25-50% is moderate, 50-75% is substantial, and >75% is considerable heterogeneity. This means 75% of the total variation is due to heterogeneity rather than chance.',
    difficulty: 'easy',
  },
  {
    id: 'q4',
    module: 'pairwise-meta-analysis',
    question: 'When should you prefer a random-effects model over a fixed-effect model?',
    options: [
      'When all studies are identical',
      'When heterogeneity is present or expected',
      'Only when I² = 0%',
      'Never - fixed-effect is always better',
    ],
    correctAnswer: 1,
    rationale: 'Random-effects models are preferred when heterogeneity is present or expected, as they account for between-study variation. Fixed-effect models assume one true effect across all studies and should be used cautiously with high I².',
    difficulty: 'medium',
  },
  {
    id: 'q5',
    module: 'proportions',
    question: 'Why use Freeman-Tukey double arcsine transformation for proportions?',
    options: [
      'It makes calculations faster',
      'It stabilizes variance and handles boundary values (0 or 1)',
      'It is required by all journals',
      'It converts proportions to odds ratios',
    ],
    correctAnswer: 1,
    rationale: 'Freeman-Tukey transformation stabilizes variance across the range of proportions and handles extreme values near 0 or 1 without requiring continuity corrections. This is particularly useful for single-arm meta-analyses of proportions.',
    difficulty: 'medium',
  },
  {
    id: 'q6',
    module: 'proportions',
    question: 'When pooling proportions, why is raw proportion pooling sometimes problematic?',
    options: [
      'Variance depends on the proportion value',
      'It gives the wrong answer every time',
      'It cannot be calculated',
      'Journal editors will reject it',
    ],
    correctAnswer: 0,
    rationale: 'Raw proportion variance depends on p itself (largest at p=0.5, smallest near 0 or 1), violating assumptions of inverse-variance weighting. Transformations stabilize the variance. Additionally, confidence intervals can exceed [0,1] and normal approximation is poor near boundaries.',
    difficulty: 'hard',
  },
  {
    id: 'q7',
    module: 'meta-regression',
    question: 'What is a key limitation of meta-regression?',
    options: [
      'It is too easy to perform',
      'Study-level associations may differ from individual-level (ecological bias)',
      'It always increases heterogeneity',
      'It can only use categorical covariates',
    ],
    correctAnswer: 1,
    rationale: 'Meta-regression suffers from ecological bias - relationships observed at the study level may not reflect individual-level relationships. Also, with few studies, meta-regression has low power and is prone to confounding between study-level characteristics.',
    difficulty: 'hard',
  },
  {
    id: 'q8',
    module: 'dta',
    question: 'In diagnostic test accuracy meta-analysis, why can\'t we pool sensitivity and specificity independently?',
    options: [
      'They are typically correlated (trade-off)',
      'They are always equal',
      'Software cannot calculate them',
      'Only sensitivity matters',
    ],
    correctAnswer: 0,
    rationale: 'Sensitivity and specificity are typically negatively correlated due to threshold effects - changing the diagnostic threshold increases one while decreasing the other. Bivariate or HSROC models account for this correlation.',
    difficulty: 'medium',
  },
  {
    id: 'q9',
    module: 'network-meta-analysis',
    question: 'What does the "transitivity" assumption mean in network meta-analysis?',
    options: [
      'All treatments must be connected in the network',
      'Effect modifiers are similarly distributed across comparisons',
      'Direct evidence is always better than indirect',
      'Studies must be published in the same year',
    ],
    correctAnswer: 1,
    rationale: 'Transitivity means that the distribution of effect modifiers (patient characteristics, study design features, etc.) is similar across different treatment comparisons. If A vs B studies systematically differ from B vs C studies, indirect estimates of A vs C may be biased.',
    difficulty: 'hard',
  },
  {
    id: 'q10',
    module: 'network-meta-analysis',
    question: 'In NMA, what does "consistency" (or "coherence") refer to?',
    options: [
      'All studies use the same outcome measure',
      'Direct and indirect evidence should agree',
      'All treatment arms have equal sample sizes',
      'Publication bias is absent',
    ],
    correctAnswer: 1,
    rationale: 'Consistency means direct and indirect evidence should produce similar estimates. For example, if we have A vs B, B vs C, and A vs C trials, the A vs C estimate from the A-C trials should agree with the indirect estimate via B. Inconsistency suggests transitivity violation or other issues.',
    difficulty: 'medium',
  },
  {
    id: 'q11',
    module: 'publication-bias',
    question: 'How many studies are generally needed for reliable funnel plot interpretation?',
    options: [
      'At least 3',
      'At least 5',
      'At least 10',
      'At least 50',
    ],
    correctAnswer: 2,
    rationale: 'At least 10 studies are generally recommended for meaningful funnel plot interpretation. With fewer studies, asymmetry can easily occur by chance, and tests for small-study effects have very low power.',
    difficulty: 'easy',
  },
  {
    id: 'q12',
    module: 'publication-bias',
    question: 'What does funnel plot asymmetry definitely indicate?',
    options: [
      'Publication bias is present',
      'The meta-analysis is invalid',
      'Small-study effects are present (multiple possible causes)',
      'The pooled estimate is wrong',
    ],
    correctAnswer: 2,
    rationale: 'Funnel plot asymmetry indicates small-study effects but doesn\'t definitively prove publication bias. Other causes include true heterogeneity, selective outcome reporting, chance, or poor methodological quality in smaller studies. Multiple lines of evidence are needed to assess bias.',
    difficulty: 'hard',
  },
  {
    id: 'q13',
    module: 'heterogeneity',
    question: 'What does τ² (tau-squared) represent?',
    options: [
      'The p-value for heterogeneity',
      'Between-study variance in random-effects model',
      'The number of studies',
      'The pooled effect size',
    ],
    correctAnswer: 1,
    rationale: 'τ² is the estimate of between-study variance in a random-effects model. It quantifies how much true effect sizes vary across studies. It is used to calculate random-effects weights and contributes to wider confidence intervals compared to fixed-effect models.',
    difficulty: 'medium',
  },
  {
    id: 'q14',
    module: 'effect-size-basics',
    question: 'An Odds Ratio of 1.0 means:',
    options: [
      'The treatment doubles the odds',
      'The treatment halves the odds',
      'No difference in odds between groups',
      'The study is biased',
    ],
    correctAnswer: 2,
    rationale: 'OR = 1.0 means no difference in odds between treatment and control groups (null effect). OR > 1 means increased odds in the treatment group, OR < 1 means decreased odds. OR is symmetric around 1 on the ratio scale, but log(OR) is symmetric around 0.',
    difficulty: 'easy',
  },
  {
    id: 'q15',
    module: 'general',
    question: 'Which statement about meta-analysis is TRUE?',
    options: [
      'Meta-analysis can prove causation',
      'Meta-analysis is only useful when all studies agree',
      'Meta-analysis increases precision by combining evidence',
      'Meta-analysis eliminates all bias from included studies',
    ],
    correctAnswer: 2,
    rationale: 'Meta-analysis increases statistical precision by combining evidence from multiple studies, narrowing confidence intervals. However, it cannot prove causation (that depends on study design), does not eliminate bias (garbage in, garbage out), and is still valuable even with heterogeneity if properly analyzed.',
    difficulty: 'medium',
  },
]
